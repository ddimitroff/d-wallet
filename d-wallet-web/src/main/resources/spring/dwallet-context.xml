<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:aop="http://www.springframework.org/schema/aop"
	xmlns:tx="http://www.springframework.org/schema/tx"
	xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
		http://www.springframework.org/schema/aop
	    http://www.springframework.org/schema/aop/spring-aop-3.0.xsd">

	<aop:aspectj-autoproxy proxy-target-class="true" />

	<bean id="userManager" class="com.ddimitroff.projects.dwallet.db.UserDAOManager"
		scope="prototype">
	</bean>

	<bean id="userSession"
		class="com.ddimitroff.projects.dwallet.rest.session.DWalletRestSession"
		scope="session">
	</bean>

	<bean id="applicationSession"
		class="com.ddimitroff.projects.dwallet.rest.session.DWalletApplicationSession"
		init-method="init" scope="singleton" destroy-method="destroy">
		<property name="userManager" ref="userManager" />
		<property name="tokenGenerator" ref="tokenGenerator" />
		<property name="adminUsers" ref="adminUsers" />
	</bean>

	<bean id="tokenGenerator"
		class="com.ddimitroff.projects.dwallet.rest.token.TokenGenerator"
		scope="singleton">
		<property name="userManager" ref="userManager" />
		<property name="tokenWatcher" ref="tokenWatcher" />
	</bean>

	<bean id="tokenWatcher" class="com.ddimitroff.projects.dwallet.rest.token.TokenWatcher"
		init-method="init" scope="singleton" destroy-method="destroy">
	</bean>

	<!-- Admin users collection -->
	<bean id="adminUsers" class="java.util.ArrayList" scope="singleton">
		<constructor-arg>
			<list>
				<ref bean="admin1" />
				<ref bean="admin2" />
			</list>
		</constructor-arg>
	</bean>

	<!-- Admin users -->
	<bean id="admin1" class="com.ddimitroff.projects.dwallet.db.UserDAO"
		scope="prototype">
		<property name="email" value="mykob.11@gmail.com" />
		<property name="hashPassword" value="mykob.11" />
	</bean>

	<bean id="admin2" class="com.ddimitroff.projects.dwallet.db.UserDAO"
		scope="prototype">
		<property name="email" value="mykob.12@gmail.com" />
		<property name="hashPassword" value="mykob.12" />
	</bean>

</beans>
